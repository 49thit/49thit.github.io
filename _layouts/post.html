---
layout: default
---
<article class="post-article">
  <header class="post-article__header">
    <h1 class="post-article__title">{{ page.title }}</h1>
  </header>
  <div class="post-article__content">
    {{ content }}
  </div>
  {% assign numbered_posts = site.posts | where_exp: "p", "p.episode" | sort: "episode" %}
  {% assign next_posts = site.posts | where_exp: "p", "p.title contains 'episodeNEXT'" %}
  {% assign next_post = next_posts | first %}
  {% assign is_episode_next = false %}
  {% if page.title contains 'episodeNEXT' or page.url contains '/episodeNEXT' %}
    {% assign is_episode_next = true %}
  {% endif %}
  {% assign found_current = false %}
  {% assign next_episode = nil %}

  {% if numbered_posts and numbered_posts.size > 0 %}
    {% for post in numbered_posts %}
      {% if found_current %}
        {% assign next_episode = post %}
        {% break %}
      {% endif %}
      {% if post.url == page.url %}
        {% assign found_current = true %}
      {% endif %}
    {% endfor %}

    {% if next_episode == nil and is_episode_next == false and next_post %}
      {% assign next_episode = next_post %}
    {% endif %}
  {% else %}
    {% assign ordered_posts = site.posts | sort: "title" %}
    {% for post in ordered_posts %}
      {% if found_current %}
        {% assign next_episode = post %}
        {% break %}
      {% endif %}
      {% if post.url == page.url %}
        {% assign found_current = true %}
      {% endif %}
    {% endfor %}
  {% endif %}
  {% if next_episode and is_episode_next == false %}
  <footer class="post-article__footer">
    <a
      class="continue-panel__cta post-article__next-button"
      href="{{ next_episode.url | relative_url }}"
      aria-label="on to {{ next_episode.title | strip_html | escape }}"
    >
      <span class="post-article__next-button-sizer" aria-hidden="true">&nbsp;</span>
      <span class="post-article__next-button-content" aria-hidden="true">
        <span class="post-article__next-button-static">next up...</span>
        <span class="post-article__next-button-marquee">
          <span>{{ next_episode.title | strip_html | escape }}</span>
        </span>
      </span>
    </a>
  </footer>
  {% endif %}
</article>
